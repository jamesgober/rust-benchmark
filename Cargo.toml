#╔═══════════════════════════════════════════════════════════╗
#║                                                           ║
#║     ▗▄▄▖ ▗▄▄▄▖▗▖  ▗▖ ▗▄▄▖▗▖ ▗▖▗▖  ▗▖ ▗▄▄▖ ▗▄▄▄▖ ▗▖ ▗▖     ║
#║     ▐▌ ▐▌▐▌   ▐▛▚▖▐▌▐▌   ▐▌ ▐▌▐▛▚▞▜▌▐▌  ▐▌▐▌  ▐▌▐▌▗▞▘     ║
#║     ▐▛▀▚▖▐▛▀▀▘▐▌ ▝▜▌▐▌   ▐▛▀▜▌▐▌  ▐▌▐▛▀▀▜▌▐▛▀▀▚▖▐▛▚▖      ║
#║     ▐▙▄▞▘▐▙▄▄▖▐▌  ▐▌▝▚▄▄▖▐▌ ▐▌▐▌  ▐▌▐▌  ▐▌▐▌  ▐▌▐▌ ▐▌     ║
#║                                                           ║
#╠═══════════╦══════════════════════════════════╦════════════╣
#║ BENCHMARK ┇ PERFORMANCE BENCHMARKING LIBRARY ┇ RUST BUILT ║
#╚═══════════╩══════════════════════════════════╩════════════╝
[package]
name    = "benchmark"
version = "0.5.8"
edition = "2021"

# Minimum Supported Rust Version (MSRV)
rust-version = "1.70"

# License
license = "Apache-2.0"

# Links
homepage      = "https://github.com/jamesgober/rust-benchmark"
repository    = "https://github.com/jamesgober/rust-benchmark"
documentation = "https://docs.rs/benchmark"

# Description
description = "Nanosecond-precision benchmarking for dev, testing, and production. Zero-overhead core timing when disabled; optional std-powered collectors and zero-dependency metrics (Watch/Timer) for real service observability."

# Keywords (5 total)
keywords = [
    "benchmark", 
    "performance", 
    "profiling", 
    "timing", 
    "metrics"
]

# Categories (5 total)
categories = [
    "development-tools::profiling", 
    "memory-management"
]

# Authors
authors = [
    "James Gober <code@jamesgober.dev>"
]



#╔═══════════════════════════════════════════════════════════╗
#║ ⚙️ FEATURES
#╚═══════════════════════════════════════════════════════════╝
[features]

# Standard Features
std         = [] # Use the Rust standard library (disables no_std).
benchmark   = [] # Benchmarking enabled (can be disabled for true zero-overhead).
metrics     = ["std"] # Use production metrics (Watch/Timer) and Rust standard library
# Gate perf-sensitive unit tests/benches so they can be opted into explicitly
perf-tests  = []

# Use parking_lot for faster RwLock in hot paths
parking-lot-locks = ["dep:parking_lot"]

# Feature Combinations
minimal  = [] # Minimal build with core timing only (no default features).
default  = ["std", "benchmark"] # Default features (includes std and benchmark).
standard = ["metrics", "benchmark"] # Default features (includes std and benchmark).
all      = ["std", "benchmark", "metrics"] # Complete build with all features enabled.



#╔═══════════════════════════════════════════════════════════╗
#║ 🧭 BENCHMARKS
#╚═══════════════════════════════════════════════════════════╝
[[bench]] # Zero Overhead Claim
name    = "overhead"
harness = false

[[bench]] # Statistics Claim
name    = "stats"
harness = false

[[bench]] # Timer primitives (Instant/Duration) micro-benches
name    = "timers"
harness = false

[[bench]] # Histogram hot-path benches (record/percentiles)
name    = "histogram_hot"
harness = false

[[bench]] # Watch/Timer hot-path benches (metrics)
name    = "watch_timer_hot"
harness = false



#╔═══════════════════════════════════════════════════════════╗
#║ 🧩 DEPENDENCIES
#╚═══════════════════════════════════════════════════════════╝
[dependencies]

# Optional: faster synchronization primitives
parking_lot = { version = "0.12", optional = true }


#╔═══════════════════════════════════════════════════════════╗
#║ 🧩 DEV DEPENDENCIES
#╚═══════════════════════════════════════════════════════════╝
[dev-dependencies]
tokio     = { version = "1", features = ["macros", "rt-multi-thread", "time"] }
trybuild  = "1.0"
criterion = "0.5"