#â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
#â•‘                                                           â•‘
#â•‘     â–—â–„â–„â–– â–—â–„â–„â–„â––â–—â––  â–—â–– â–—â–„â–„â––â–—â–– â–—â––â–—â––  â–—â–– â–—â–„â–„â–– â–—â–„â–„â–„â–– â–—â–– â–—â––     â•‘
#â•‘     â–â–Œ â–â–Œâ–â–Œ   â–â–›â–šâ––â–â–Œâ–â–Œ   â–â–Œ â–â–Œâ–â–›â–šâ–â–œâ–Œâ–â–Œ  â–â–Œâ–â–Œ  â–â–Œâ–â–Œâ–—â–â–˜     â•‘
#â•‘     â–â–›â–€â–šâ––â–â–›â–€â–€â–˜â–â–Œ â–â–œâ–Œâ–â–Œ   â–â–›â–€â–œâ–Œâ–â–Œ  â–â–Œâ–â–›â–€â–€â–œâ–Œâ–â–›â–€â–€â–šâ––â–â–›â–šâ––      â•‘
#â•‘     â–â–™â–„â–â–˜â–â–™â–„â–„â––â–â–Œ  â–â–Œâ–â–šâ–„â–„â––â–â–Œ â–â–Œâ–â–Œ  â–â–Œâ–â–Œ  â–â–Œâ–â–Œ  â–â–Œâ–â–Œ â–â–Œ     â•‘
#â•‘                                                           â•‘
#â• â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•£
#â•‘ BENCHMARK â”‡ PERFORMANCE BENCHMARKING LIBRARY â”‡ RUST BUILT â•‘
#â•šâ•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•
[package]
name    = "benchmark"
version = "0.6.0"
edition = "2021"

# Minimum Supported Rust Version (MSRV)
rust-version = "1.70"

# License
license = "Apache-2.0"

# Links
homepage      = "https://github.com/jamesgober/rust-benchmark"
repository    = "https://github.com/jamesgober/rust-benchmark"
documentation = "https://docs.rs/benchmark"

# Description
description = "Nanosecond-precision benchmarking for dev, testing, and production. Zero-overhead core timing when disabled; optional std-powered collectors and zero-dependency metrics (Watch/Timer) for real service observability."

# Keywords (5 total)
keywords = [
    "benchmark", 
    "performance", 
    "profiling", 
    "timing", 
    "metrics"
]

# Categories (5 total)
categories = [
    "development-tools::profiling", 
    "memory-management"
]

# Authors
authors = [
    "James Gober <code@jamesgober.dev>"
]



#â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
#â•‘ âš™ï¸ FEATURES
#â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[features]

# Internal std switch (activated by higher-level features)
std = []

# Core features
default        = ["benchmark", "collector"]               # Turn-key dev: timing + in-process stats
benchmark      = ["std"]                                   # Enable real timing
collector      = ["std"]                                   # Collector + histogram
metrics        = ["collector"]                             # Watch/Timer production metrics

# Precision backends
high-precision = ["collector"]                             # Swap to high-precision histogram backend
hdr            = ["high-precision", "dep:hdrhistogram"]   # Use external HDR histogram backend

# Perf/long tests are opt-in
perf-tests = []
long-tests = []

# Faster locks in hot paths (optional)
parking-lot-locks = ["dep:parking_lot"]



#â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
#â•‘ ğŸ§­ BENCHMARKS
#â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[bench]] # Zero Overhead Claim
name    = "overhead"
harness = false

[[bench]] # Statistics Claim
name    = "stats"
harness = false

[[bench]] # Timer primitives (Instant/Duration) micro-benches
name    = "timers"
harness = false

[[bench]] # Histogram hot-path benches (record/percentiles)
name    = "histogram_hot"
harness = false

[[bench]] # Watch/Timer hot-path benches (metrics)
name    = "watch_timer_hot"
harness = false



#â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
#â•‘ ğŸ§© DEPENDENCIES
#â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[dependencies]

# Optional: faster synchronization primitives
parking_lot = { version = "0.12", optional = true }

# Optional: external HDR histogram backend
hdrhistogram = { version = "7", optional = true }


#â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
#â•‘ ğŸ§© DEV DEPENDENCIES
#â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[dev-dependencies]
tokio     = { version = "1", features = ["macros", "rt-multi-thread", "time"] }
trybuild  = "1.0"
criterion = "0.5"
proptest  = "1"

#â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
#â•‘ ğŸ§ª EXAMPLES (with required-features)
#â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[example]]
name = "zero_overhead"
path = "examples/zero_overhead.rs"
# zero_overhead should compile in no-default-features mode

[[example]]
name = "basic_cli"
path = "examples/basic_cli.rs"
required-features = ["benchmark"]

[[example]]
name = "overhead_compare"
path = "examples/overhead_compare.rs"
required-features = ["benchmark"]

[[example]]
name = "async_task"
path = "examples/async_task.rs"
required-features = ["benchmark"]

[[example]]
name = "multi_threaded_collection"
path = "examples/multi_threaded_collection.rs"
required-features = ["collector"]

[[example]]
name = "prometheus_textfile"
path = "examples/prometheus_textfile.rs"
required-features = ["metrics"]

[[example]]
name = "web_server"
path = "examples/web_server.rs"
required-features = ["metrics"]